# Executive Summary

This tech note discusses the supported use cases to run Omnissa Horizon on Nutanix while running the native Nutanix hypervisor, AHV. Omnissa Horizon offers a digital workspace experience and it delivers virtual desktops and apps hosted on Nutanix AHV.

# Introduction

## Audience

This tech note is part of the Nutanix Solutions Library and provides an overview of the Omnissa Horizon on Nutanix solution. It's a technical introduction to the solution for IT architects and administrators.

## Purpose

This document covers the following topics:

- Nutanix Platform Overview
- Omnissa Horizon Platform Overview
- Omnissa Horizon and Nutanix AHV

This document describes what components of Omnissa Horizon are currently supported to run on Nutanix AHV.
Unless otherwise stated, the solution described in this document is valid on all supported AOS releases.

## Document Version History

| **Version Number** | **Published** | **Notes** |
| :---: | --- | --- |
| 1.0 | July 2024 | Original publication. |

# Nutanix Platform Overview

Nutanix designed its software to give customers running workloads in a hybrid cloud environment the same experience they expect from on-premises Nutanix clusters. Because Nutanix in a hybrid multicloud environment runs AOS and AHV with the same CLI, UI, and APIs, existing IT processes and third-party integrations continue to work regardless of where they run.

![Overview of the Nutanix Hybrid Multicloud Software](../images/TN-2162-Nutanix_Platform_Overview_image01.png "Overview of the Nutanix Hybrid Multicloud Software")

Nutanix AOS can withstand hardware failures and software glitches and ensures that application availability and performance are never compromised. Combining features like native rack awareness with public cloud partition placement groups, Nutanix operates freely in a dynamic hybrid multicloud environment.

# Omnissa Horizon Platform Overview

The Omnissa Horizon platform manages and delivers virtualized or hosted desktops and applications to end users. Horizon allows you to create and broker connections to Windows virtual desktops, Linux virtual desktops, Remote Desktop Server (RDS)â€“hosted applications and desktops, Linux-hosted applications, and Windows physical machines.

## Horizon Connection Servers on AHV
Install on VM, add to Pod
Don't migrate

## Virtual Appliances

## Manual Pools
Omnissa Horizon currently supports manual pools on Nutanix AHV. This means that you can create virtual desktops or virtual servers on AHV and add these to a desktop pool in Omnissa Horizon. You can entitle active directory users or groups to logon to these virtual machines using the Horizon client. The Horizon agent needs to be installed after the desktop or server has been sysprepped. This is required to be able to register the machines correctly in Horizon. Ideally, you create a base image with all the software installed that is required and you run a sysprep command to generalize the Windows Operating system. Then you can clone this base image multiple times and apply a sysprep customization to the cloned virtual machines. The cloned virtual machines will copy the properties from the base image, make sure to set those properties as you want them. Examples of these properties are virtual CPUs, memory allocation, disk size, vGPU assignment. The cloned machines will be persistent, so it is possible to change these properties after cloning (on a per virtual machine base).

### Virtual Desktops
You can add a desktop pool in Omnissa Horizon and choose type "Manual Desktop Pool" with Machine Source "Other sources". This allows you to select registered machines running on Nutanix AHV to include in the Virtual Desktop Pool. The User Assignment can still be "Floating", but it is recommended to use "Dedicated" assignment because of the persistency of the virtual machines. In most scenarios it's not desirable to have users logged on to virtual machines that potentially contain data from other users.

### Session Hosts

### Scripting
The steps that are required to create the virtual machines, installing and registering the virtual machines to Horizon, and creating the manual desktop pool(s) can be automated using various tools. Nutanix AHV and Omnissa Horizon both provide a rest API to perform various tasks, like creating or cloning virtual machines, adding machines to Omnissa Horizon, assigning users to desktops or delete desktops. In the following table you can see examples of tools you can use to perform a certain task:

| **Task** | **Automation tool** |
| --- | --- | 
| Create golden image | Nutanix REST API, Microsoft Deployment Toolkit, Ansible | 
| Clone and sysprep virtual machines | Nutanix REST API |
| Install Horizon Agent and register to Horizon | Ansible, Microsoft Configuration Manager |
| Create Horizon Manual Pool | Omnissa Horizon REST API |
| Entitle User (Group) to the Manual Pool | Omnissa Horizon REST API |
| Add or remove User (Group) or Registered Machines | Omnissa Horizon REST API |


### Limitations
Running Horizon Agent in virtual machines on Nutanix AHV has the following limitations and known issues:

(Horizon Agent installation in Desktop mode is not supported on Windows Server OS.)
vGPU?

# Conclusion



# Appendix

## References

1. [Horizon on Nutanix](http://portal.nutanix.com/kb/xxxx)
2. [Create Manual pools on Horizon](https://docs.omnissa.com/bundle/Desktops-and-Applications-in-HorizonV2312/page/CreateaManualDesktopPool.html)

