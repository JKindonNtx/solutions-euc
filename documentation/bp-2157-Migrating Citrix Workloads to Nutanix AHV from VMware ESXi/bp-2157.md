# Executive Summary

This best practice guide provides recommendations for migrating Citrix Virtual Apps and Desktops and Citrix Desktop as a Service (DaaS) workloads running on Nutanix infrastructure from VMware ESXi to Nutanix AHV. A common challenge of converting a live end-user computing (EUC) platform like Citrix is that workloads are often in high demand and have low tolerance for outage scenarios. With limited infrastructure resources, you might have to transition EUC workloads during planned outage windows. However, you can use the additional capacity provided by Nutanix Cloud Infrastructure (NCI) to plan, test, stage, and carry out conversions seamlessly with simplified rollback capabilities.

This document covers the following subject areas:

- Overview of native Nutanix migration tools and conversion capabilities
- Common scenarios for Citrix workloads running on VMware ESXi on Nutanix
- Citrix solution components that you can't convert
- Migration and conversion considerations for guest virtual machine (VM) configurations, general Citrix workloads, and provisioning tools
- Procedures for migrating from VMware ESXi to Nutanix AHV

_Table: Document Version History_

| **Version Number** | **Published** | **Notes** |
| :---: | --- | --- |
| 1.0 | January 2024 | Original publication. |

# Glossary

Base image
: An image that Citrix MCS uses to provision machines

Citrix Desktop as a Service (DaaS)
: The Citrix cloud-based desktop and application delivery solution

Citrix Machine Creation Services (MCS)
: The Citrix provisioning technology that uses hypervisor-native capabilities to clone workloads from a base image

Citrix Provisioning
: A network-based streaming technology that allows a single vDisk to serve as the operating system disk for multiple VMs

Citrix Virtual Apps and Desktops
: The Citrix desktop and application solution that runs on-premises

Citrix Virtual Desktop Agent (VDA)
: The Citrix software that allows a connection to a target machine

Cluster conversion
: The process of converting a cluster running ESXi to Nutanix AHV in place

Cross-hypervisor disaster recovery
: A Nutanix solution that can automatically convert a VM from one hypervisor to another

Dedicated catalogs
: A Citrix construct that provides groups of persistent desktops

Hosting connection
: A Citrix construct that links Citrix to a hypervisor, such as Nutanix AHV

Infrastructure components
: Any component that isn't a Citrix VDA (such as operating systems, appliances, and so on)

Nutanix Guest Tools (NGT)
: An in-guest agent framework that offers advanced VM management features through the Nutanix Cloud Platform (NCP)

Nutanix Move
: A cross-hypervisor mobility solution to move VMs with minimal downtime

Nutanix Prism Central
: The central management solution for multiple clusters that offers advanced features and capabilities

Nutanix Prism Element
: The management interface for a single cluster; used by Citrix to integrate with Nutanix through a hosting connection

Nutanix VirtIO drivers
: A collection of drivers for paravirtual devices that enhance VM stability and performance on Nutanix AHV

Pooled catalogs
: A Citrix construct that provides groups of machines that are either provisioned or built manually; in the context of this document, always linked to a hosting connection and not persistent, so changes don't carry over after restarts

Secure Boot
: A security standard to ensure that machines use software that the machine manufacturer trusts during startup

Swing migration
: The process of moving workloads from one platform to another and back again; uses temporary or alternate resources as part of the migration

Template VM
: A VM specification that Citrix Provisioning uses to create VDAs

Trusted Platform Module (TPM)
: Manages cryptographic keys for hardware and software integrity and security services like encryption

vDisk
: A disk image that streams to target devices (VDAs) using Citrix Provisioning

vGPU
: A software-based graphics virtualization platform that allows VMs to access a physical graphics processing unit (GPU)

Virtual Trusted Platform Module (vTPM)
: A software-based emulation of the TPM 2.0 specification that works as a virtual device

Virtualization-based security (VBS)
: The process of using hardware virtualization and the Windows hypervisor to create an isolated virtual environment that becomes the operating system's root of trust

Workload conversion
: The process of converting a VM from one hypervisor to another

Workload migration
: The process of moving a VM from one cluster to another (in the context of this document)

# Nutanix Migration Tools

Nutanix offers several mechanisms for converting workloads from ESXi to Nutanix AHV. For more information, see the following documentation:

- [Nutanix Move](https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2072-AHV-Migration:nutanix-move.html)
- [Cross-hypervisor disaster recovery](https://portal.nutanix.com/page/documents/solutions/details?targetId=BP-2005-Data-Protection:cross-hypervisor-disaster-recovery.html)
- [Nutanix VM mobility](https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2072-AHV-Migration:nutanix-vm-mobility.html)
- [Nutanix Image Service](https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2072-AHV-Migration:migration-scenario-third-party-esxi-to-nutanix-ahv.html)
- [Cluster conversion](https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2072-AHV-Migration:cluster-conversion.html)

Review the appropriate tooling for your environment and plan accordingly. Some environments might use multiple components for conversion and migration. If you choose the cluster conversion path, always back up VMs before conversion.

# Migration Scenarios for Citrix Environments

The following sections provide overviews of the three Citrix migration scenarios presented in this document and their associated prerequisites.

## Scenario 1: Workload Cluster Swing Migration

In this scenario, we assume that you have the capacity available for a side-by-side swing migration, where you can convert, test, and prepare workloads before converting the existing cluster. In a swing migration, you scale up and out until you reach a point of confidence, then you convert the existing ESXi cluster to Nutanix AHV.

We recommend this migration scenario. To obtain swing capacity, consider the following methods:

- If you have sufficient compute available, split out and configure a minimum of three nodes as a Nutanix AHV cluster. 
  > This cluster can scale as you make more nodes available by completing the migration and conversion processes.
- Use Nutanix Cloud Clusters (NC2) nodes in either Microsoft Azure or Amazon Web Services (AWS). 
    > Ensure that you're licensed by Microsoft or AWS to run the appropriate workloads.

  <!-- Do you not have similar concerns about AWS licensing? Also, does this qualify as a note? --> <!--NN: Updated -->

## Scenario 2: Dedicated Workload Cluster

In this scenario, we assume that you're using the VMware ESXi cluster only to run Citrix VDAs. These VDAs can be already provisioned or deployed in any of the following ways:

- Citrix Machine Creation Services (MCS)
- Citrix Provisioning
- Deployed from a template or standalone build without provisioning 

You can have a combination of provisioning methods, but no components other than Citrix VDAs can be running on the cluster. 

## Scenario 3: Shared Cluster, No Spare Capacity

In this scenario, we assume that the infrastructure and VDAs exist on the same cluster. We also assume that no spare capacity exists for a side-by-side swing migration.

This scenario is the most intrusive hypervisor migration. You must consider the effect on other services beyond the Citrix components.

This strategy isn't viable if the current VMware ESXi deployment contains any of the following Citrix-based appliances:

- NetScaler VPX
- NetScaler Application Delivery Management (ADM)
- Citrix App Layering

None of these appliances support an in-place conversion. You must have a configuration migration methodology to support these components.

Review all workloads on a shared cluster for conversion compatibility and follow product and vendor best practices.

## Assumptions

In all scenarios, we assume the following:

- You use a supported version of VMware ESXi.
- You have access to a Nutanix Move appliance.
- You use a Windows-based or third-party DHCP service before the migration, and you continue to use that service during the migration if you provision with MCS or Provisioning.
- Your existing workloads are supported. 
  > Consider Nutanix AHV IP address management (IPAM) after a successful migration, if necessary. For more information, see the [Nutanix AHV IP Address Management (IPAM)](https://portal.nutanix.com/page/documents/solutions/details?targetId=BP-2071-AHV-Networking:nutanix-ahv-ip-address-management.html) section of the Nutanix AHV Networking best practice guide.
- If you use GPUs in the environment, the GPU cards and associated profiles are supported on the target Nutanix AHV versions.
- Any supporting services (such as Active Directory Domain Services, Certificate Services, and Domain Naming Services) are healthy before migration or conversion.

# Citrix Infrastructure Considerations

Typical Citrix Virtual Apps and Desktops and Citrix Desktop as a Service (DaaS) environments might consist of the components provided in the following table. The table maps each platform and component to a migration or conversion strategy.

_Table: Component and Platform Compatibility for Migration and Conversion_

| **Component** | **Platform** | **Migration or Conversion Scenario** |
| --- | --- | --- |
| NetScaler | DaaS and Citrix Virtual Apps and Desktops | Not supported for conversion. Use Scenario 1 migration only. |
| ADM Appliance or Agent | DaaS and Citrix Virtual Apps and Desktops | Not supported for conversion. Use Scenario 1 migration only. |
| App Layering Appliance | DaaS and Citrix Virtual Apps and Desktops | Not supported for conversion. Use Scenario 1 migration only. |
| Cloud Connector | DaaS | Supported by all scenarios. New deployment recommended. |
| License Server | DaaS and Citrix Virtual Apps and Desktops | Supported by all scenarios. |
| Delivery Controller | Citrix Virtual Apps and Desktops | Supported by all scenarios. |
| Director | Citrix Virtual Apps and Desktops | Supported by all scenarios. |
| StoreFront | DaaS and Citrix Virtual Apps and Desktops | Supported by all scenarios. |
| Federated Authentication Service | DaaS and Citrix Virtual Apps and Desktops | Supported by all scenarios. |
| Provisioning | DaaS and Citrix Virtual Apps and Desktops | Supported by all scenarios. |
| Session Recording Server | DaaS and Citrix Virtual Apps and Desktops | Supported by all scenarios. |
| Universal Print Server | DaaS and Citrix Virtual Apps and Desktops | Supported by all scenarios. |
| Workspace Environment Management | Citrix Virtual Apps and Desktops | Supported by all scenarios. |

The Citrix components in the previous table depend on peripheral services that you need to migrate or convert. The following list provides examples of these service dependencies:

- Active Directory Domain Services, including Domain Naming Services (DNS)
- Active Directory Certificate Services
- Microsoft SQL Server databases
- File services, including Nutanix Files
- DHCP services

## NetScaler Considerations

Nutanix doesn't support NetScaler appliances for in-place hypervisor conversions. Instead, use the following migration approach:

1. Deploy the new appliances on Nutanix AHV.
2. Migrate the configuration.
3. Test a service cutover.
4. Cut over to the new appliances.

Once complete, decommission or retire the existing NetScaler appliances running on VMware ESXi.

For more information, see the following documentation:

- [NetScaler VPX on AHV](https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2034-Citrix-ADC-VPX-on-AHV:TN-2034-Citrix-ADC-VPX-on-AHV)
- [Deploying a NetScaler VPX on Nutanix AHV](https://community.netscaler.com/s/article/Deploying-a-NetScaler-VPX-on-Nutanix-AHV)
- [How to Migrate the Configuration of an Existing Citrix ADC Appliance to Another Appliance](https://support.citrix.com/article/CTX117535/how-to-migrate-the-configuration-of-an-existing-citrix-adc-appliance-to-another-appliance) 

## NetScaler Application Delivery Management Considerations

Nutanix doesn't support NetScaler Application Delivery Management (ADM) appliances for in-place hypervisor conversions. Instead, use the following migration approach:

1. Ensure that both the existing and new appliances are the same version.
    > You might need to update your existing appliance's version to match the new appliance before migration.
2. Deploy a new ADM appliance on Nutanix AHV.
3. Back up the existing ADM appliance.
4. Restore the configuration to the new appliance.

For more information, see the [How to migrate an existing ADM instance to a newly deployed ADM server](https://support.citrix.com/article/CTX482161/how-to-migrate-an-existing-adm-instance-to-a-newly-deployed-adm-server) article from Citrix.

## Citrix App Layering Appliance Considerations

Nutanix doesn't support App Layering appliances for in-place hypervisor conversions. Instead, use the following migration approach:

1. Deploy a new appliance on Nutanix AHV.
    > For more information on deploying Citrix App Layering appliances on Nutanix AHV, see [Nutanix AHV](https://docs.citrix.com/en-us/citrix-app-layering/4/install-appliance/nutanix-ahv.html) in the Install Appliance section of the Citrix App Layering documentation.
2. Export the layers from the existing appliances.
3. Import the layers following Citrix best practices.

For more information on exporting and importing layers, see the [Export and import layers](https://docs.citrix.com/en-us/citrix-app-layering/4/layer/export-import-layers) section of the Citrix App Layering documentation.

# General Considerations

Nutanix AHV and VMware ESXi have different configuration options when considering Citrix integration.

## Citrix Provisioning

- VMware ESXi supports Citrix Provisioning Boot Device Manager (BDM) using hard disk partitions and the CD-ROM (ISO) boot method. Nutanix AHV supports BDM using the ISO boot method.
- Nutanix AHV and VMware ESXi both support Citrix Provisioning using network boot.
- You can only use the Citrix Virtual Apps and Desktops setup wizard with Provisioning and Nutanix AHV. This wizard is the same for both Citrix Virtual Apps and Desktops and Citrix DaaS.
- The template or snapshot configuration determines the VDA configurations in Nutanix AHV, so make the appropriate boot configurations (such as ISO or network boot) on the template VM before the snapshot.

## Citrix Integration Points

- Both Citrix Virtual Apps and Desktops and Citrix DaaS integrate with ESXi through VMware vCenter.
- Citrix integrates with Nutanix AHV primarily at the Nutanix Prism Element level through a plug-in architecture.
- For Nutanix Cloud Clusters (NC2) on Azure deployments, Citrix integrates with Nutanix Prism Central. However, that integration isn't within the scope of this document unless you use NC2 on Azure for swing capacity.
- With VMware ESXi integration, multiple clusters can exist under a single vCenter appliance. A single Citrix hosting connection can service multiple clusters.
- With Nutanix AHV integration, a hosting connection uses a Nutanix Prism Element instance. Multiple Nutanix AHV clusters use multiple hosting connections.
- You might need to adjust the default hosting connection limits for large environments. During configuration, update the **Maximum new actions per minute** value to 50.

## Citrix Guest Platform Tools

- Workloads running on VMware ESXi have VMware Tools installed, are at a supported version, and are operational.
- At a minimum, workloads running on Nutanix AHV require the Nutanix VirtIO drivers.
- Any workloads requiring conversion to or from Nutanix AHV require Nutanix Guest Tools (NGT).
- Both sets of tools can coexist during the migration and conversion phases.
- Citrix MCS and Provisioning base images require that you remove NGT after conversion and before reprovisioning. Currently, you can't use NGT on nonpersistent workloads.

## Migrating vTPM-Enabled Source Machines

If you use a vTPM on any of your source ESXi machines, remove any dependencies on the source vTPM. You can migrate vTPM-enabled machines, but not the vTPM contents.

You can add a new vTPM to the target machine once you migrate it to Nutanix AHV. After migration, you can enable services and use the vTPM. If you use Nutanix Move to target Nutanix Prism Central, the vTPM configurations are included.

## Secure Boot and Virtualization-Based Security Considerations

Virtualization-based security (VBS) relies on hardware virtualization for Nutanix AHV and ESXi. Nutanix Move supports VBS-enabled VM conversions. If you use Nutanix Move to target Nutanix Prism Central, the appropriate VBS configurations are included. If you use cross-hypervisor disaster recovery, turn off VBS on the source VM and the associated hardware virtualization setting in the VM's CPU settings.

## GPU Considerations

Both VMware ESXi and Nutanix AHV support using GPUs for guest VMs. Both solutions present GPUs to VMs in similar ways:

- You install a driver at the host level that allows the host to understand the GPU and perform appropriate actions against it.
- You install a driver at the guest level that allows the guest to address the GPU that the host provides to it.

In a workload conversion scenario, remove the guest GPU profile before converting the VM. The driver can stay installed in the guest VM if the combination of guest and host drivers is supported.

In a cluster conversion scenario, remove the GPU profile from the guest VM. Once you complete the conversion, install the appropriate GPU drivers on the Nutanix AHV hosts and assign the appropriate GPU profile back to the guest VM.

All GPU nodes must run the same version of the driver. Nutanix doesn't support running the driver in any of the following configurations:

- Different versions of the driver on different nodes in the cluster
- On a single GPU-enabled node
- On a subset of GPU-enabled nodes

To ensure that you download and install the appropriate GPU drivers on the Nutanix AHV hosts, see the [Nutanix Compatibility and Interoperability Matrix](https://portal.nutanix.com/page/documents/compatibility-interoperability-matrix/nvidia-drivers) and the [Nutanix NVIDIA GRID Host Driver for AHV Installation Guide](https://portal.nutanix.com/page/documents/details?targetId=NVIDIA-Grid-Host-Driver-For-AHV-Install-Guide:NVIDIA-Grid-Host-Driver-For-AHV-Install-Guide).

## Nutanix Files Consideration

If you run Nutanix Files on your VMware ESXi clusters, you can't perform a cluster conversion. You must deploy a new cluster with Nutanix AHV and migrate the data. Nutanix Files data migration is out of the scope of this document.

## After Converting to Nutanix AHV from VMware ESXi

After converting a VM to Nutanix AHV, consider adding or enabling the following components:

- NIC
- CD-ROM
- vTPM
- VBS (Credential Guard) settings
- vGPU

These considerations can vary based on your environment, requirements, and your conversion tool.

# General Citrix Workload Conversion Guidance

The following section offers general guidance for converting and migrating VMware ESXi workloads to Nutanix AHV.

## Citrix Machine Creation Services: Pooled

When you convert pooled or nonpersistent workloads provisioned with Citrix Machine Creation Services (MCS), convert the base images to Nutanix AHV and provision new catalogs on AHV with the converted image.

## Citrix Machine Creation Services: Fast Clone vs. Full Clone

Citrix MCS on VMware ESXi allows either fast-clone or full-clone provisioning. For more information, see the [Difference between Fast Clone and Full Clone](https://support.citrix.com/article/CTX224040/difference-between-fast-clone-and-full-clone) article from Citrix.

With Nutanix AHV as your hypervisor, you can't use fast-clone provisioning. All VMs are full clones, and the Nutanix platform handles all storage-related optimizations. You can use Nutanix Move to convert a fast-clone VM directly to Nutanix AHV.

If you use fast-clone provisioning for dedicated or persistent virtual desktop workloads in ESXi, you can't convert those workloads in their current form through the cluster conversion process. You must first convert them to standard VMs. You can clone a fast-clone VM to a full clone using the native ESXi capability. For more information on converting a fast-clone VM to a full-clone VM, see [VMware KB 1026753](https://kb.vmware.com/s/article/1026753).

To confirm whether you're using a fast or full clone provisioning model, run the following PowerShell command after loading the Citrix PowerShell snapin:

```
Get-ProvScheme -ProvisioningSchemeName "Your_ProvScheme_Name" | Select-Object UseFullDiskCloneProvisioning
```

If the value returned is `False`, you're using a fast-clone provisioning method. This attribute, and its value, aren't relevant to a Nutanix AHV–based provisioning scheme.

Once you complete the conversion, remove the VMs from the MCS catalog and add them to a power-managed catalog:

1. Create a new power-managed catalog and Delivery Group.
2. Turn off the source VDA.
3. Clone the source VM to a new VM in VMware ESXi.
4. Disconnect the NIC on the source VDA.
5. Validate that the converted VM starts.
6. Shut down the VM.
7. Record the assignment details and published name.
8. Delete the existing record from the Citrix MCS catalog by selecting **Remove the virtual machines from the catalog, but do not delete the virtual machine**.
9. Import the cloned VM into the power-managed catalog and Delivery Group.
10. Mirror the assignments and published name details.

Once you complete the preparation tasks, you can convert the full-clone VMs to Nutanix AHV.

This process retains the Active Directory Machine Account for the new VM. Record the local administrator credentials in case of a machine account password change during the conversion window.

## Citrix Machine Creation Services: Persistent Full-Clone

For dedicated, persistent, or static workloads provisioned with Citrix MCS, complete the following process:

1. Convert the VDAs to Nutanix AHV.
2. Remove the VDAs from the existing Citrix catalog.
3. Add the VDAs to a new power-managed catalog.

This process changes the hosted machine identities of the VDAs (how Citrix identifies VMs at the hypervisor level) and gives them a different hosting connection (how Citrix talks to the hypervisor).

To continue using Citrix MCS to provision these workload types on Nutanix AHV, convert the base images to Nutanix and configure a new machine catalog.

## Citrix Provisioning: Pooled

For pooled or nonpersistent workloads provisioned with Citrix Provisioning, configure a new template VM on the target Nutanix AHV cluster.

The procedures in the following sections outline two migration paths for existing Provisioning vDisks:

- Reverse image the existing vDisk.
- Replicate the vDisk and import it with Nutanix Image Service.

For more information on creating and provisioning new target devices with converted template VMs, see the migration-related sections of this document.

### Reverse Imaging the Existing vDisk

Complete the following procedure to reverse image the existing vDisk and configure a new template VM:

1. Reverse image the existing vDisk to the existing VMware ESXi environment.
2. Install the Nutanix VirtIO drivers on the new VM.
3. Install NGT on the new VM. 
    > This step is required for cluster conversion or cross-hypervisor disaster recovery.
4. Convert the new template VM to Nutanix AHV.

If you use Nutanix Move to migrate the machine, don't select **Uninstall VMware tools on target VMs**. Complete the following procedure first:

1. Uninstall the Provisioning Target Device software.
2. Uninstall VMware Tools.
3. Install the Provisioning Target Device software.
4. Remove NGT from the base images.
    > You can't use NGT with nonpersistent workloads.
5. (Optional) Assign a GPU profile to the template VM and ensure that the GPU drivers are operational.
6. Use the Provisioning Imaging wizard to create a new vDisk.
7. Configure the new template VM in Nutanix AHV with the correct boot options and snapshot.

### Replicating and Importing the vDisk with Nutanix Image Service

Complete the following procedure to replicate the vDisk and import it using Nutanix Image Service:

1. Copy the existing vDisk in Provisioning, including vDisk versions.
2. Import the vDisk copy as a new vDisk.
3. Consolidate the vDisk versions into a new merged base.
4. Set the new vDisk to Private mode.
5. Assign the vDisk to the relevant boot machine in the VMware ESXi environment. 
6. Start the boot machine.
7. Install the Nutanix VirtIO drivers into the new vDisk.
    <note>Don't install NGT.</note>
8. Turn off the boot machine.
9. Import the vDisk (VHDX) to Nutanix Image Service.
10. Create a new VM in Nutanix AHV with the imported image as the image source.
11. Start the new VM in Nutanix AHV.
12. Ensure that any hardware detections finish and that all devices are installed properly.
13. Uninstall the Provisioning Target Device software.
14. Uninstall VMware Tools.
15. Install the Provisioning Target Device software.
16. (Optional) Assign a GPU profile to the template VM and ensure that the GPU drivers are operational.
17. Use the Provisioning Imaging wizard to create a new vDisk.
18. Configure the new template VM in Nutanix AHV with the correct boot options and snapshot.

Keep the following considerations in mind:

- If you use the ISO approach, attach the ISO to the template VM and associated snapshot in Nutanix AHV.
- If you use network boot, enable the proper boot configurations on the template VM and associated snapshot. Ensure that you don't need any changes to DHCP services.
- You can’t select the BDM option in the setup wizard on Nutanix AHV. If you select **PXE** in the setup wizard, the provisioned target devices honor the template VM snapshot settings. You don’t need to do anything if the template VM snapshot contains the BDM ISO and has the default boot order.
- Configure the write cache to **Cache on device memory with overflow on hard disk**. Set memory to zero so the cache writes directly to the target device's hard disk.

For more information on using Citrix Provisioning on Nutanix AHV, see the [Citrix Provisioning Solution](https://portal.nutanix.com/page/documents/solutions/details?targetId=BP-2062-Citrix-Virtual-Apps-and-Desktops-Service:citrix-provisioning-solution.html) section of the Citrix DaaS best practice guide.

## Citrix App Layering

If you use Citrix App Layering to create your images, complete the following procedure to migrate to Nutanix AHV:

1. In the existing VMware ESXi environment, create a new platform layer.
2. Install the Nutanix VirtIO drivers on the new platform layer.
3. Configure a new connection to Nutanix AHV.
4. Create a new platform layer on a Nutanix AHV packaging machine.
5. (Optional) If you use Citrix Provisioning, complete the following steps:
    1. Remove the Provisioning Target Device software.
    2. Remove VMware Tools from the build machine.
    3. Install the Provisioning Target Device software.
6. Compile and publish the image to the appropriate provisioning mechanism.
7. If you're using Citrix MCS, ensure that the correct snapshot is available in Nutanix AHV.

This guidance assumes that you installed both VMware Tools and the Citrix Target Device software in the platform layer. If they aren't installed, adjust the procedure according to your existing processes.

For more information, see the [Nutanix AHV](https://docs.citrix.com/en-us/citrix-app-layering/4/connect/nutanix-ahv) section of the Citrix App Layering documentation.

# Scenario 1: Swing Migration for Workload Clusters

Rebuild and migrate the configuration if any of the following appliances exist in your environment:

- NetScaler VPX
- NetScaler Application Delivery Management
- Citrix App Layering

For more information on these components, see the Citrix Infrastructure Considerations section.

Complete the following procedure regardless of your workload provisioning type:

1. If you use GPUs, ensure that the GPU drivers for the Nutanix AHV hosts are installed and the GPUs are available.
2. Install the Nutanix Plug-In for Citrix on the Delivery Controllers or Cloud Connectors.
    > For Citrix Cloud, install the plug-in on all Cloud Connectors in a resource location that communicates with a Nutanix Prism Element instance.
3. Configure a hosting connection to Nutanix Prism Element in Citrix Studio.

You might need to adjust the default hosting connection limits for large environments. During configuration, update the **Maximum new actions per minute** value to 50.

## Swing Migration for Citrix MCS Pooled Workloads

Complete the following procedure for Citrix MCS pooled catalogs:

1. Install the Nutanix VirtIO drivers on the existing base image.
2. (Optional) Remove the assigned GPU profile from the base image.
3. Prepare and convert the base image to Nutanix AHV.
    > You can use Nutanix Move for this process.
4. Remove VMware Tools from the converted base image.
5. (Optional) Assign a GPU profile to the base image.
    > Citrix MCS honors any GPU profile assigned to the snapshot.
6. Create a new snapshot of the base image in Nutanix Prism Element.
7. Configure a new MCS pooled catalog using the hosting connection and Nutanix snapshot.
8. Provision the VDAs.
    > Don't use MCS I/O configurations in Nutanix AHV. It reduces the benefits of OpLog performance.
9. Add the provisioned workloads to the appropriate Delivery Group

Repeat the previous procedure for each base image and associated catalog, then complete the following steps:

1. Decommission the old catalogs and VDAs.
2. Delete the old hosting connections.

## Swing Migration for Citrix MCS Persistent Workloads

Complete the following procedure for Citrix MCS persistent catalogs:

1. Create a new power-managed catalog and Delivery Group.
    > These components house the migrated VDAs.
2. Record the existing VDA user assignments and published name details.
3. Install the Nutanix VirtIO drivers on the VDAs.
4. (Optional) Remove the assigned GPU profile from the VDA.
5. Convert the machines to Nutanix AHV.
    > You can use Nutanix Move for this process.
6. Citrix MCS honors any GPU profile assigned to the snapshot.
7. Disconnect the source ESXi VMs from the network.
8. Remove the ESXi VM from the Delivery Group and existing MCS catalog by selecting **Remove the virtual machines from the catalog, but do not delete the virtual machine**.
9. Add the converted VDAs to the power-managed catalog.
10. Source the machines from the Nutanix AHV hosting connection.
11. Specify the Active Directory account.
12. Add the VDAs to the correct Delivery Group.
13. Assign the appropriate users and published names (using PowerShell, if required).

To continue using MCS to provision persistent machines on Nutanix AHV using the same base image, complete the following procedure:

1. Install the Nutanix VirtIO drivers on the existing base image.
2. (Optional) Remove the assigned GPU profile from the base image.
3. Prepare and convert the base image to Nutanix AHV.
    > You can use Nutanix Move for this process.
4. Remove VMware Tools from the converted base image.
5. (Optional) Assign a GPU profile to the base image.
    > Citrix MCS honors any GPU profile assigned to the snapshot.
6. Create a new snapshot of the base image in Nutanix Prism Element.
7. Configure a new MCS persistent catalog using the correct hosting connection and Nutanix Snapshot.
8. Provision the VDAs.

Repeat the previous procedure for each base image and associated catalog, then complete the following steps:

1. Decommission the old catalogs.
2. Delete the old hosting connections.
3. Delete the original VDAs.

Ensure that you have a backup and disaster recovery strategy for the migrated workloads.

## Swing Migration for Citrix Provisioning Pooled Workloads

Complete the following procedure for Citrix Provisioning pooled catalogs:

1. Convert the existing Provisioning vDisk image from VMware ESXi to Nutanix AHV.
    > For more information, see the Citrix Provisioning: Pooled in the General Citrix Workload Conversion Guidance section of this document.
2. Install the Nutanix Plug-In for Citrix on the Provisioning servers.
    > The plug-in references hosting connections defined in Citrix Studio.
3. If you need to use the BDM ISO boot method, follow these steps:
    1. Create a new ISO file using the Provisioning wizard.
    2. Copy the ISO file to a Nutanix storage container.
    3. Attach the ISO file to the template VM.
4. Deploy new streamed VDAs using the Citrix Virtual Apps and Desktops setup wizard in Provisioning, specifying the Nutanix Prism Element instance that hosts your template, snapshot, and workloads.
    > This process creates the relevant catalog in Citrix and a host connection in Provisioning.
    > The wizard only presents the PXE boot method for the target device boot mode. However, if you configure the Nutanix template VM snapshot correctly and use the BDM ISO boot method, the wizard carries out an ISO-based boot.
    > Citrix Provisioning honors any GPU profile assigned to the snapshot.
5. Create a new Delivery Group.
6. Add the newly provisioned workloads.

Repeat this process for each template VM required for Provisioning streaming. Then complete the following steps:

1. Remove the existing Provisioning-streamed VDAs.
2. Decommission the old catalogs.
3. Delete the old hosting connections.
4. Delete the old host connections in Provisioning.

## Swing Migration for Power-Managed Manual VMs

Complete the following procedure for manually provisioned catalogs:

1. Install the Nutanix VirtIO drivers on the existing VDA.
2. Install NGT on the existing VDA.
    > This step is required for cluster conversion or cross-hypervisor disaster recovery.
3. (Optional) Remove the assigned GPU profile from the VDA.
4. Convert the VDAs to Nutanix AHV.
    > You can use Nutanix Move for this process.
5. Disconnect the source ESXi machines from the network.
6. (Optional) Assign a GPU profile to the converted VDA.
7. Update the VDA with the new `HostedMachineID` and `HypervisorConnectionUid`.
    > The `HostedMachineID` is the `UUID` of the Nutanix VM. The `HypervisorConnectionUid` is the `UID` of the new hosting connection.

Complete the following steps after converting the VDA:

1. Check the VDA's health.
2. Finish any hardware alterations and driver installations.
3. Remove VMware Tools from the VDA.
4. (Optional) Remove NGT from the VDA.

Repeat the previous steps for each VDA that you plan to convert.

After converting the VDAs, complete the following steps:

1. Delete the old hosting connections.
2. Delete the source VMware ESXi VMs.

Ensure that you have a backup and disaster recovery strategy for the migrated workloads.

## Note on Swing Migration Scaling

When you complete the migration, you can safely scale down your VMware environment and scale up the new Nutanix AHV environment.

# Scenario 2: Dedicated Workload Cluster Migration

Complete the following configuration steps regardless of your workload provisioning type:

1. Install the Nutanix Plug-In for Citrix on the Delivery Controllers or Cloud Connectors:
    > For Citrix Cloud, install the plug-in on all Cloud Connectors in a resource location that communicates with a Nutanix Prism Element instance.
2. Configure a hosting connection to Nutanix Prism Element in Citrix Studio.
    > In this scenario, you can only create the hosting connection after converting the cluster to AHV.

You might need to adjust the default hosting connection limits for large environments. During configuration, update the **Maximum new actions per minute** value to 50.

## Dedicated Workload Cluster Migration for Citrix MCS Pooled Workloads

Complete the following procedure for MCS pooled catalogs:

1. Remove all provisioned workloads from the existing cluster.
2. Install the Nutanix VirtIO drivers on the existing base image.
3. Install NGT on the base image.
    > This step is required for cluster conversion and cross-hypervisor disaster recovery.
4. (Optional) Remove the assigned GPU profile from the base image.

Repeat this process for each base image and associated catalog. At this stage, only the base images exist on the workload cluster.

Once you complete this process for each base image and associated catalog, you can convert the cluster to Nutanix AHV. For more information, see the [In-Place Hypervisor Conversion](https://portal.nutanix.com/page/documents/details?targetId=Web-Console-Guide-Prism:man-cluster-conversion-c.html) section of the Prism Element Web Console Guide.

If you use GPU in the environment, install the GPU drivers for the Nutanix AHV hosts and ensure that the GPU is available.

After you convert the cluster, complete the following steps:

1. Check the health of the base images.
2. Finish any hardware alterations and driver installations.
3. Remove VMware Tools from the base images.
4. Remove NGT from the base images.
    > You can't use NGT with nonpersistent workloads.
5. (Optional) Assign a GPU profile to the base images.
6. Create a new snapshot of the base image in Nutanix Prism Element.
7. Configure a new MCS pooled catalog using the correct hosting connection and new Nutanix snapshot.
8. Provision the VDAs.
9. Add the provisioned workloads to the correct Delivery Group.

Don't use MCS I/O configurations in Nutanix AHV. It reduces the OpLog performance benefits.

Repeat the previous process for each base image and associated catalog, then complete the following steps:

1. Decommission the old catalogs.
2. Delete the old hosting connections.

## Dedicated Workload Cluster Migration for Citrix MCS Persistent Workloads

If you use a fast-clone configuration for VDA provisioning, see the Citrix Machine Creation Services: Fast Clone vs. Full Clone section for configuration prerequisites.

Complete the following procedure for MCS persistent catalogs:

1. Record the user assignments and published name details of the existing VDAs.
2. Remove VMs from the MCS catalog by selecting **Remove the virtual machines from the catalog, but do not delete the virtual machine**.
3. (Optional) Add the VDA to a new power-managed catalog and associated Delivery Group using the existing Vmware ESXi hosting connection.
4. Remove the `XdProvisioned` tag from the VM in vCenter.
    > Removing this tag allows Citrix to find the machine that was previously provisioned with MCS.
5. Mirror the user assignments and published name details on the VDAs.
6. Install the Nutanix VirtIO drivers on the VDAs.
7. (Optional) Remove the assigned GPU profile from each VDA.
8. Install NGT on each VDA.
    > This step is required for cluster conversion (VM mobility) and cross-hypervisor disaster recovery.

To continue using MCS to provision persistent machines on Nutanix AHV using the same base image after the cluster conversion, complete the following steps:

1. Install the Nutanix VirtIO drivers on the base image.
2. Install NGT on each base image.
    > This step is required for cluster conversion (VM mobility) and cross-hypervisor disaster recovery.
3. (Optional) Remove the assigned GPU profile from the base image.

Repeat this process for each base image and associated catalog. At this stage, only the base images and persistent virtual desktops that are prepared for conversion exist in the workload cluster.

After you complete this process for each base image and associated catalog, you can convert the cluster to Nutanix AHV. For more information, see the [In-Place Hypervisor Conversion](https://portal.nutanix.com/page/documents/details?targetId=Web-Console-Guide-Prism:man-cluster-conversion-c.html) section of the Prism Element Web Console Guide.

After you convert the cluster, complete the following steps:

1. If you use GPU in the environment, install the GPU drivers for the Nutanix AHV hosts and ensure the GPU is available.
2. Check the health of the converted VDAs.
3. Finish any hardware alterations and driver installations.
4. Remove VMware Tools from the VDAs.
5. (Optional) Remove NGT from the persistent VDAs.
6. (Optional) Assign a GPU profile to the VDAs.
7. Configure a new hosting connection to the Nutanix Prism Element instance that hosts the workloads in Citrix Studio.
8. Update the VDAs with the new `HostedMachineID` and `HypervisorConnectionUid`. 
   > The `HostedMachineID` is the `UUID` of the Nutanix VM. The `HypervisorConnectionUid` is the `UID` of the new hosting connection.

You might need to adjust the default hosting connection limits for large environments. During configuration, update the **Maximum new actions per minute** value to 50.

To continue using MCS to provision persistent machines on Nutanix AHV using the same base image, complete the following procedure:

1. Remove VMware Tools from the converted base image.
2. Remove NGT from the base images.
    > You can't use NGT on a base image and then deploy workloads. You can install NGT after deploying VDAs.
3. (Optional) Assign a GPU profile to the base image.
    > Citrix MCS honors the GPU profile assigned to the snapshot.
4. Create a new snapshot of the base image in Nutanix Prism Element.
5. Configure a new MCS persistent catalog using the correct hosting connection and the new Nutanix snapshot.
6. Provision the VDAs.

Repeat this process for each base image and associated catalog, then complete the following steps:

1. Decommission the old MCS catalogs.
2. Delete the old hosting connections.

Ensure that you have a backup and disaster recovery strategy for the migrated workloads.

## Dedicated Workload Cluster Migration for Citrix Provisioning Pooled Workloads

Complete the following procedure for Provisioning pooled catalogs:

1. Install the Nutanix Plug-In for Citrix on the Provisioning servers.
    > The plug-in references the hosting connections that you create in Citrix Studio.
2. Convert the existing Provisioning vDisk image from VMware ESXi to Nutanix AHV.
    > For more information, see the Citrix Provisioning: Pooled in the General Citrix Workload Conversion Guidance section of this document. For this scenario, follow the reverse imaging method.
3. Remove all provisioned workloads from the existing cluster.
4. Remove the target devices from the provisioning database.

Repeat this process for each VM template image and associated catalog. At this stage, only the template VMs exist on the workload cluster. 

Once you complete this process for each VM template image and associated catalog, you can convert the cluster to Nutanix AHV. For more information, see the [In-Place Hypervisor Conversion](https://portal.nutanix.com/page/documents/details?targetId=Web-Console-Guide-Prism:man-cluster-conversion-c.html) section of the Prism Element Web Console Guide.

If you use GPU in the environment, install the GPU drivers for the Nutanix AHV hosts and ensure the GPU is available.

After you convert the cluster, complete the following steps:

1. Check the health of the template VMs.
2. Finish any hardware alterations and driver installations.
3. (Optional) If you plan to use the Provisioning BDM ISO boot method, complete the following steps:
   1. Create a new ISO file using the Provisioning wizard.
   2. Copy the ISO file to a Nutanix storage container.
   3. Attach the ISO file to the appropriate template VM.
4. Remove the Provisioning Target Device from the template VMs.
5. Remove VMware Tools from the template VMs.
6. Install the Provisioning Target Device software from the template VMs.
7. Remove NGT from the base images.
    > You can't use NGT with nonpersistent workloads.
8. Configure the template VM with one of the following boot options: 
    - Network
    - CD-ROM ISO
9. Use the Provisioning Imaging wizard to create a new vDisk.
10. Configure the vDisk:
    1. Configure the write cache to **Cache on device memory with overflow on hard disk**.
    2. Set memory to zero.
        > This setting sends the write cache directly to the target device's hard disk. For more information, see the [Citrix Provisioning Solution](https://portal.nutanix.com/page/documents/solutions/details?targetId=BP-2062-Citrix-Virtual-Apps-and-Desktops-Service:citrix-provisioning-solution.html) section of the Citrix DaaS on Nutanix best practice guide.
11. Create a new snapshot of the base image in Nutanix Prism Element.
12. Configure a hosting connection to Nutanix Prism Element in Citrix Studio.
    > You might need to adjust the default hosting connection limits for large environments. During configuration, update the **Maximum new actions per minute** value to 50.
13. Deploy the new streamed VDAs from the Citrix Virtual Apps and Desktops setup wizard in Provisioning, specifying the Nutanix Prism Element instance hosting your template, snapshot, and workloads.
    > The wizard only presents the PXE boot method for the target device boot mode. However, if you configure the Nutanix template VM snapshot correctly and use the BDM ISO boot method, the wizard carries out an ISO-based boot.
    > The deployment process creates the relevant catalog in Citrix and a host connection in Provisioning.
    > Citrix Provisioning honors any GPU profile assigned to the snapshot.
14. Create a new Delivery Group and add the newly provisioned workloads.

Repeat this process for each template VM required for Provisioning streaming. Then complete the following steps:

1. Decommission the original catalogs.
2. Delete the original hosting connections.
3. Delete the original host connections in Provisioning.

## Dedicated Workload Cluster Migration for Power-Managed Manual VMs

Complete the following procedure for manually provisioned catalogs:

1. Install the Nutanix VirtIO drivers into the existing VDA.
2. Install NGT into the existing VDA.
    > This step is required for cluster conversion or cross-hypervisor disaster recovery.
3. If appropriate, remove the assigned GPU profile from the VDA.

Repeat this process for each VDA, and make sure the VMware ESXi VDAs are prepared for conversion at this stage. After completing this process, you can convert the cluster to Nutanix AHV. For more information, see the [In-Place Hypervisor Conversion](https://portal.nutanix.com/page/documents/details?targetId=Web-Console-Guide-Prism:man-cluster-conversion-c.html) section of the Prism Element Web Console Guide.

After you convert the cluster, complete the following steps:

1. Check the health of the VDAs.
2. Finish any hardware alterations and driver installations.
3. Remove VMware Tools from the VDAs.
4. (Optional) Remove NGT from the VDAs.
5. (Optional) Assign a GPU profile to the VDAs.
6. Update the VDAs with the new `HostedMachineID` and `HypervisorConnectionUid`. 
   > The `HostedMachineID` is the `UUID` of the Nutanix VM, and the `HypervisorConnectionUid` is the `UID` of the new hosting connection.

Repeat this process for each VDA required for conversion, then delete the old hosting connections.

Ensure that you have a backup and disaster recovery strategy for the migrated workloads.

# Scenario 3: Shared Cluster Migration

The shared cluster scenario shares some considerations and processes with the swing migration and dedicated workload cluster scenarios.

Rebuild and migrate the configuration if you have any of the following appliances in your environment:

- NetScaler VPX
- NetScaler Application Delivery Management
- Citrix App Layering

You can't use the shared cluster migration scenario with any of these Citrix components or any other unsupported appliance or entity in the cluster, including Nutanix Files. You must follow the swing migration procedure. For more information, see the Citrix Infrastructure Considerations section.

For more information on converting general infrastructure server clusters, see the [Requirements and Limitations for In-Place Hypervisor Conversion](https://portal.nutanix.com/page/documents/details?targetId=Web-Console-Guide-Prism:man-cluster-conversion-requirements-limitations-r.html) section of the Nutanix Prism Element Web Console Guide.

## Common Workload Configuration

Complete the following configuration steps regardless of your workload provisioning type:

1. Install the Nutanix Plug-In for Citrix on the Delivery Controllers or Cloud Connectors.
    > For Citrix Cloud, install the plug-in on all Cloud Connectors in a resource location that can communicate with a Nutanix Prism Element instance.
2. Configure a hosting connection to Nutanix Prism Element in Citrix Studio.
    > In this scenario, you must convert the cluster to Nutanix AHV before you can create the hosting connection.

You might need to adjust the default hosting connection limits for large environments. During configuration, update the **Maximum new actions per minute** value to 50.

## Citrix Workloads

Follow the guidelines outlined for dedicated workload clusters (scenario 2) for all Citrix workload types, including MCS pooled, MCS persistent, Provisioning pooled, and power-managed VMs.

# Migration Checklist

Use the following checklist during the preplanning stage of your migration:

- Review and plan for in-guest security considerations, such as BitLocker encryption.
- Review and plan for in-guest security considerations that may rely on a vTPM.
- Review supported and appropriate migration methods for your environment.
- Review supported versions and operating systems as they relate to conversion methods.
- If you use GPUs in the environment, plan for GPU deployment.
- Plan your outage windows and rollback capability.
- Contact Nutanix Professional Services for additional scenarios not documented in this best practice guide.

# Nutanix Professional Services

Nutanix Professional Services offers IT teams in-depth and practical guidance to support customer migration journeys. From the initial EUC migration discovery and plan definition through implementation and post-migration validation, Nutanix Professional Services guarantees success by using highly skilled consultants with proven expert-level experience to support and migrate Citrix environments to Nutanix Cloud Infrastructure (NCI).

While the migration scenarios in this document are common, Nutanix acknowledges that you might have additional considerations in your environment that each migration unique. Before migration, we recommend completing the following steps:

- Validate all unique requirements.
- Perform a current state assessment.
- Define migration waves, if necessary.
- Document detailed rollback plans.
- Define a postmigration checklist and success criteria.

Document all activities for auditing and peer review before starting any migration.

Nutanix Professional Services provides prepackaged service offerings for migrations and tailored services to meet specific requirements. The following list includes prepackaged service offerings related to Citrix migrations:

EUC Migration Workshop
: Nutanix Professional Services assesses the environment and develops a migration strategy for an existing Citrix environment. This service includes a dedicated workshop that produces a documented migration plan. For more information, see the [EUC Migration Workshop service description](https://www.nutanix.com/content/dam/nutanix/resources/service-descriptions/sd-euc-migration-workshop.pdf).

EUC Workload and Gold Image Migration
: Nutanix Professional Services carries out a migration plan by migrating workloads and base images. For more information, see the [EUC Workload and Gold Image Migration service description](https://www.nutanix.com/content/dam/nutanix/resources/service-descriptions/sd-euc-workload-and-gold-image-migration.pdf).

EUC User Data Migration
: Nutanix Professional Services carries out a migration plan by migrating users and their data. For more information, see the [EUC User Data Migration service description](https://www.nutanix.com/content/dam/nutanix/resources/service-descriptions/sd-euc-user-data-migration.pdf).

EUC Broker Deployment
: Nutanix Professional Services deploys a new Citrix Virtual Apps and Desktops or Citrix Desktop as a Service (DaaS) environment on NCI. For more information, see the [EUC Broker Deployment service description](https://www.nutanix.com/content/dam/nutanix/resources/service-descriptions/sd-euc-broker-deployment.pdf).

For more information on these services and to view the complete Professional Services EUC catalogue, see the [Nutanix Professional Services Virtual Desktop Modernization page](https://www.nutanix.com/support-services/professional-services/virtual-desktop-modernization).

# References

1. [Migration Scenario: Nutanix ESXi to Nutanix AHV](https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2072-AHV-Migration:migration-scenario-nutanix-esxi-to-nutanix-ahv.html) in the Migrating VMs to Nutanix AHV tech note
2. Nutanix Move User Guide:
    - [Supported Operating Systems for UEFI Enabled VMs](https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Move:top-support-for-uefi-enabled-os.html)
    - [Support for UEFI with Secure Boot Enabled VMs](https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Move:top-support-for-secure-boot.html)
    - [ESXi to AHV and ESXi to Nutanix Cloud Clusters (NC2)](https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Move:top-esxi-vm-migration-c.html)
3. [Cross-Hypervisor Disaster Recovery](https://portal.nutanix.com/page/documents/solutions/details?targetId=BP-2005-Data-Protection:cross-hypervisor-disaster-recovery-1.html) in the Data Protection and Disaster Recovery best practice guide
4. Nutanix Disaster Recovery Guide:
    - [CHDR specifications for UEFI and Secure Boot Enabled VMs](https://portal.nutanix.com/page/documents/details?targetId=Disaster-Recovery-DRaaS-Guide:wc-dr-chdr-compatibilty-r.html)
    - [Disaster Recovery Specifications for vTPM Enabled Guest VMs](https://portal.nutanix.com/page/documents/details?targetId=Disaster-Recovery-DRaaS-Guide:ecd-ecdr-procedure-vTPM-c.html)
5. [In-Place Hypervisor Conversion](https://portal.nutanix.com/page/documents/details?targetId=Web-Console-Guide-Prism:man-cluster-conversion-c.html) in the Prism Element Web Console Guide
6. [Nutanix AHV IP Address Management](https://portal.nutanix.com/page/documents/solutions/details?targetId=BP-2071-AHV-Networking:nutanix-ahv-ip-address-management.html) in the Nutanix AHV Networking best practice guide
7. Nutanix GPU driver installation references:
    - [Compatibility and Interoperability Matrix](https://portal.nutanix.com/page/documents/compatibility-interoperability-matrix/nvidia-drivers) (requires a My Nutanix account to view).
    - [NVIDIA GRID Host Driver for AHV Installation Guide](https://portal.nutanix.com/page/documents/details?targetId=NVIDIA-Grid-Host-Driver-For-AHV-Install-Guide:NVIDIA-Grid-Host-Driver-For-AHV-Install-Guide)
8. NetScaler:
    - [NetScaler VPX on AHV](https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2034-Citrix-ADC-VPX-on-AHV:TN-2034-Citrix-ADC-VPX-on-AHV)
    - [Proof of Concept Guide: Deploying a NetScaler VPX on Nutanix AHV](https://community.netscaler.com/s/article/Deploying-a-NetScaler-VPX-on-Nutanix-AHV)
    - [How to Migrate the Configuration of an Existing Citrix ADC Appliance to Another Appliance](https://support.citrix.com/article/CTX117535/how-to-migrate-the-configuration-of-an-existing-citrix-adc-appliance-to-another-appliance)
9. Citrix Application Delivery Management (ADM):
    - [How to migrate an existing ADM instance to a newly deployed ADM server](https://support.citrix.com/article/CTX482161/how-to-migrate-an-existing-adm-instance-to-a-newly-deployed-adm-server)
10. Citrix App Layering documentation:
    - [Install appliance: Nutanix AHV](https://docs.citrix.com/en-us/citrix-app-layering/4/install-appliance/nutanix-ahv.html)
    - [Layer: Export and import layers](https://docs.citrix.com/en-us/citrix-app-layering/4/layer/export-import-layers)
    - [Connect: Nutanix AHV (Acropolis)](https://docs.citrix.com/en-us/citrix-app-layering/4/connect/nutanix-ahv)
11. [Difference between Fast Clone and Full Clone](https://support.citrix.com/article/CTX224040/difference-between-fast-clone-and-full-clone)
12. [VMware KB 1026753: Converting a linked clone or instant clone virtual machine to a full clone virtual machine](https://kb.vmware.com/s/article/1026753)
13. [Citrix Provisioning Solution](https://portal.nutanix.com/page/documents/solutions/details?targetId=BP-2062-Citrix-Virtual-Apps-and-Desktops-Service:citrix-provisioning-solution.html) in the Citrix DaaS on Nutanix best practice guide.
